\pagebreak

## Автоматика {#config-automation}

Механизм «Автоматика» предназначен для программирования поведения прибора в зависимости от тех или иных условий. В качестве условий могут выступать любые события, сформированные прибором или время. А в качестве действий, которые прибор может выполнить, выступают взятия или снятия, а также действия с открытыми коллекторами.

Автоматика может применяться для решения следующих задач на объектах:

* взятие и снятие объектов по расписанию;
* взятие и снятие нескольких разделов одновременно;
* отображение состояния раздела на световом оповещателе;
* управление внешними устройствами, подключенными к открытым коллекторам прибора.

При переходе на вкладку «Автоматика» вверху окна отображаются кнопки, с помощью которых можно сконфигурировать правила.

\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[keepaspectratio=true,scale=0.9]{img/06-13-config-automation-01.png}
 	}
	\captionof*{figure}{Кнопки для создания правил, вкладка «Автоматика»}
\end{minipage}



> В прибор уже заложена логика работы со световыми и звуковыми оповещателями. Для настройки открытых коллекторов, к которым подключены оповещатели, нужно использовать кнопки «Маяк...» или «Сирена...», в зависимости от типа оповещателя.

При создании правил важно помнить следующие утверждения:

* Если коллектор используется для подключения других устройств (например, БВИ), то он не может использоваться больше нигде, включая удаленное управление, которое появится немного позже.
* Если коллектор уже используется для ролей (Маяк, Сирена), то он не может использоваться больше нигде.
* Если к прибору подключен РПШ-12 и шлейф расширителя включен в настройках прибора, то коллектор-на-шлейфе нельзя использовать для правил автоматики или для ролей.
* Всего можно создать 8 правил с ролью «Маяк» или «Сирена». Причем эти правила не зависят от количества стандартных правил автоматики.


### Маяк

**Подключение светового оповещателя**

Для того чтобы подключить маяк к прибору, нужно: 
		* «Плюсовой» кабель оповещателя подключить к любому плюсовому выходу контрольной панели, например, к выходу для питания клавиатуры или шлейфов. 
		* «Минусовой» кабель оповещателя должен быть подключен к одному из семи открытых коллекторов: FIRE, DEFECT, LED_G, LED_Y, FIRE2, DEFECT2, DISABL.

\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[keepaspectratio=true,scale=0.8]{img/06-13-config-automation-03.png}
 	}
	\captionof*{figure}{Подключение светового оповещателя к прибору}
\end{minipage}


Если к Норду подключен расширитель РПШ-12, то можно задействовать клеммы «Z1» - «Z8» расширителя.   
К приборам можно подключить любой световой оповещатель с напряжением питания 12 В. Максимальный коммутируемый ток не должен превышать 250 мА.

**Настройка правила**

Для светового оповещателя, который индицирует состояние объекта или раздела нужно настроить правило с ролью «Маяк. Для создания правила во вкладке «Автоматика» следует нажать кнопку «Маяк» и выбрать выход, к которому подключен оповещатель. 
В случае если на приборе сконфигурированно несколько разделов, то при создании правила можно указать раздел, для которого маяк будет отображать состояние.


\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[keepaspectratio=true,scale=0.8]{img/06-13-config-automation-02.png}
 	}
	\captionof*{figure}{Создание правила «Маяк»}
\end{minipage}



**Описание работы оповещателя**

Если правило «Маяк» настроено для отображения состояния раздела:

* Маяк непрерывно горит, если раздел поставлен на охрану;
* Маяк не горит, если раздел снят с охраны;
* Маяк мигает, если раздел в тревоге.

Если правило «Маяк» настроено для отображения состояния объекта: 

* Маяк непрерывно горит, если все разделы взяты под охрану;
* Маяк не горит, если хотя бы один из разделов снят с охраны;
* Маяк мигает, если есть хотя бы один раздел в тревоге.


### Сирена

**Подключение оповещателя**

Подключение сирены на открытый коллектор осуществляется следующим образом:

* «Плюсовой» кабель оповещателя может быть подключен к любому плюсовому выходу контрольной панели, например, к выходу для питания клавиатуры или шлейфов. 
* «Минусовой» кабель оповещателя должен быть подключен к одному из семи открытых коллекторов: FIRE, DEFECT, LED_G, LED_Y, FIRE2, DEFECT2, DISABL.


**Настройка правила**

Для звукового оповещателя нужно настроить правило с ролью «Сирена». Для создания правила во вкладке «Автоматика» следует нажать кнопку «Сирена» и выбрать выход, к которому она подключена. 

\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[keepaspectratio=true,scale=0.8]{img/06-13-config-automation-04.png}
 	}
	\captionof*{figure}{Создание правила «Сирена»}
\end{minipage}



Сирена подключенная на открытый коллектор отличается от сирены, подключенной на одноименный выход "Сирена" тем, что в первом случае прибор не контролирует состояние этой линии.
Для настройки параметров звучания сирены нужно перейти в блок [Сирена](#config-misc-siren) вкладки Разное.


### Другое

Помимо предустановленных правил, в приборе можно создать до 16 других правил. При наступлении указанных в правиле условий прибор может выполнить взятие или снятие с охраны одного или всех разделов, замкнуть или разомкнуть дискретный выход, а также начать периодическое замыкание и размыкание дискретного выхода с заданным интервалом.

\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[keepaspectratio=true,scale=0.8]{img/06-13-config-automation-05.png}
 	}
	\captionof*{figure}{Окно создания правила}
\end{minipage}



**Настройка правила**

Рассмотрим настройку правил на конкретном примере.

_Задача_

Настроить взятие раздела №1 под охрану по расписанию в 19 часов 30 минут по вторникам и средам.

_Решение_

Для решения поставленной задачи необходимо создать действие, выполняющее взятие раздела под охрану по расписанию.


1. На вкладке «Автоматика» нажать кнопку «Другое».
2. В поле «Действие» из выпадающего списка выберите значение «Взять под охрану».
3. В поле «Раздел» выберите значение «1».
4. В поле «Условие» выберите значение «по расписанию».
5. С помощью выпадающих меню в поле «Время» установите значение «19:30».
6. В поле «День недели» выберите значение «указать». В появившемся при этом списке дней недели оставьте галочки в чек-боксах «вт» и «ср». В остальных чек-боксах галочки снимите.

\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[keepaspectratio=true,scale=0.8]{img/06-13-config-automation-06.png}
 	}
	\captionof*{figure}{Окно создания правила}
\end{minipage}


7. Нажмите «ОК» для сохранения правила. Правила вступят в силу после записи настроек в прибор.


\begin{minipage}{\linewidth}
	\makebox[\linewidth]{
 		\includegraphics[width=0.9\textwidth]{img/06-13-config-automation-07.png}
 	}
	\captionof*{figure}{Все созданные правила}
\end{minipage}




В данном примере рассматривается автоматическое взятие под охрану, однако в качестве действия можно указать снятие объекта с охраны. В таком случае объект будет сниматься с охраны по заданному расписанию. Так же можно настроить автоматическое замыкание или/и размыкание дискретных выходов прибора.

Настроить взятие под охрану всех разделов объекта можно с помощью значения «Все разделы» поля «Раздел». Чтобы настроить взятие под охрану нескольких конкретных разделов, для каждого из них следует выполнить настройку взятия отдельно.

Взятие под охрану можно задать для определенных дней недели, как в рассмотренном примере; для каждого дня; только для будних дней (с понедельника по пятницу); а также - только для выходных.

Автоматическое взятие под охрану, как и любое другое действие, можно осуществить не только по расписанию, но и по событию. В этом случае нужно знать код события, которое будет использоваться в правиле.

